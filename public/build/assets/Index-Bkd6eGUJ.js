import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-mFK_bMo8.js";import{d as z,f as V,o as u,w as d,b as o,u as a,e,g as $,i as _,t as i,n as D,x as Y,a as p,l as F,r as k,c as I,h as Z,y as ee,F as R,k as M,m as se}from"./app-DA2OwBuc.js";import{_ as b}from"./index-BMPFyPQQ.js";import{_ as G}from"./Separator.vue_vue_type_script_setup_true_lang-CKdrjqhY.js";import{u as te,_ as ae,a as oe}from"./useViewMode-DfKaj1Xy.js";import{_ as N}from"./index-BGeUKtuW.js";import{a as re,b as ne,d as le,c as de,_ as ie}from"./CardTitle.vue_vue_type_script_setup_true_lang-DWbdFgnu.js";import{R as H,T as ue}from"./triangle-alert-D3xfIAT9.js";import{D as J,C as q,a as ce}from"./list-R4rD3uMk.js";import{C as O}from"./filter-XGaVL60S.js";import{U as pe,a as me,S as K}from"./user-D02yoekO.js";import{E as Q}from"./eye-CMhFNelG.js";import{T as W}from"./trash-2-94HVum9T.js";import{P as A}from"./x-C6v3_JDq.js";import"./index-BV0i58t1.js";import"./useForwardExpose-DBK4_ufP.js";import"./VisuallyHidden-DEgB8TXE.js";import"./RovingFocusGroup-CKPTfuzX.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./check-CP81MTY8.js";import"./createLucideIcon-DSygwVmt.js";import"./Input.vue_vue_type_script_setup_true_lang-C6SwG4RY.js";import"./Label.vue_vue_type_script_setup_true_lang-DjwPXCB2.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-MAi_Zfoz.js";import"./chevron-up-C3_Fby4R.js";import"./useFormControl-AnpGCc7q.js";const fe={class:"flex items-start justify-between"},ve={class:"space-y-1 flex-1 min-w-0"},ge={class:"flex items-center space-x-2"},_e={class:"flex items-center space-x-2 ml-4"},xe={class:"mb-4"},be={class:"flex items-center space-x-2"},he={class:"text-2xl font-bold text-expense"},ye={class:"grid grid-cols-1 gap-3 mb-4"},we={class:"flex items-center space-x-2"},$e={key:0,class:"text-xs bg-warning text-warning-foreground px-2 py-0.5 rounded-full"},De={key:0,class:"flex items-center justify-between p-2 bg-confirmed/10 rounded-md"},Ce={class:"flex items-center space-x-2"},ke={class:"text-sm"},Ve={class:"grid grid-cols-1 gap-2 mb-4"},Fe={key:0,class:"flex items-center justify-between p-2 bg-muted/20 rounded-md"},Be={class:"flex items-center space-x-2"},je={class:"text-sm"},Le={key:1,class:"flex items-center justify-between p-2 bg-muted/20 rounded-md"},Se={class:"flex items-center space-x-2"},Te={class:"text-sm"},Ue={key:0,class:"mb-4"},Pe={class:"text-sm bg-muted/30 p-2 rounded-md"},Re={class:"flex justify-end space-x-2"},Ne=z({__name:"DespesaCard",props:{despesa:{}},emits:["delete"],setup(B,{emit:C}){const j=B,h=C,L=s=>{switch(s){case"pago":return"bg-confirmed text-confirmed-foreground";case"pendente":return"bg-pending text-pending-foreground";case"vencido":return"bg-error text-error-foreground";default:return"bg-pending text-pending-foreground"}},x=s=>{switch(s){case"pago":return q;case"vencido":return ue;default:return ce}},g=s=>({pago:"Pago",pendente:"Pendente",vencido:"Vencido"})[s]||s,y=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(s)),v=s=>new Date(s).toLocaleDateString("pt-BR"),f=(s,n)=>{if(s==="pago")return!1;const S=new Date;return new Date(n)<S},r=s=>{const n=new Date,w=new Date(s).getTime()-n.getTime();return Math.ceil(w/(1e3*60*60*24))},m=()=>{h("delete",j.despesa.id)};return(s,n)=>(u(),V(a(ie),{class:D(["hover:shadow-md transition-shadow",{"border-error bg-error/5":f(s.despesa.status,s.despesa.data_vencimento)}])},{default:d(()=>[o(a(re),{class:"pb-3"},{default:d(()=>[e("div",fe,[e("div",ve,[e("div",ge,[o(a(ne),{class:"text-lg truncate"},{default:d(()=>[_(i(s.despesa.descricao),1)]),_:1}),s.despesa.recorrente?(u(),V(a(H),{key:0,class:"h-4 w-4 text-muted-foreground"})):$("",!0)]),o(a(le),{class:"flex items-center space-x-2"},{default:d(()=>[e("span",null,i(s.despesa.categoria),1),n[0]||(n[0]=e("span",{class:"text-xs"},"•",-1)),e("span",null,i(s.despesa.tipo==="fixa"?"Fixa":"Variável"),1)]),_:1,__:[0]})]),e("div",_e,[o(a(N),{class:D(L(s.despesa.status))},{default:d(()=>[(u(),V(Y(x(s.despesa.status)),{class:"mr-1 h-3 w-3"})),_(" "+i(g(s.despesa.status)),1)]),_:1},8,["class"])])])]),_:1}),o(a(de),null,{default:d(()=>[e("div",xe,[e("div",be,[o(a(J),{class:"h-5 w-5 text-expense"}),e("span",he,i(y(s.despesa.valor)),1)])]),e("div",ye,[e("div",{class:D(["flex items-center justify-between p-2 rounded-md",f(s.despesa.status,s.despesa.data_vencimento)?"bg-error/10":"bg-muted/30"])},[e("div",we,[o(a(O),{class:D(["h-4 w-4",f(s.despesa.status,s.despesa.data_vencimento)?"text-error":"text-muted-foreground"])},null,8,["class"]),n[1]||(n[1]=e("span",{class:"text-sm font-medium"},"Vencimento",-1)),s.despesa.status!=="pago"&&r(s.despesa.data_vencimento)<=7&&r(s.despesa.data_vencimento)>=0?(u(),p("span",$e,i(r(s.despesa.data_vencimento))+" dias ",1)):$("",!0)]),e("span",{class:D(["text-sm",f(s.despesa.status,s.despesa.data_vencimento)?"text-error font-medium":""])},i(v(s.despesa.data_vencimento)),3)],2),s.despesa.data_pagamento?(u(),p("div",De,[e("div",Ce,[o(a(q),{class:"h-4 w-4 text-confirmed"}),n[2]||(n[2]=e("span",{class:"text-sm font-medium"},"Pagamento",-1))]),e("span",ke,i(v(s.despesa.data_pagamento)),1)])):$("",!0)]),e("div",Ve,[s.despesa.creator?(u(),p("div",Fe,[e("div",Be,[o(a(pe),{class:"h-4 w-4 text-muted-foreground"}),n[3]||(n[3]=e("span",{class:"text-sm font-medium"},"Criado por",-1))]),e("span",je,i(s.despesa.creator.name),1)])):$("",!0),s.despesa.responsible_user?(u(),p("div",Le,[e("div",Se,[o(a(me),{class:"h-4 w-4 text-muted-foreground"}),n[4]||(n[4]=e("span",{class:"text-sm font-medium"},"Responsável",-1))]),e("span",Te,i(s.despesa.responsible_user.name),1)])):$("",!0)]),s.despesa.observacoes?(u(),p("div",Ue,[n[5]||(n[5]=e("p",{class:"text-sm font-medium text-muted-foreground mb-1"},"Observações",-1)),e("p",Pe,i(s.despesa.observacoes),1)])):$("",!0),o(a(G),{class:"my-4"}),e("div",Re,[o(a(F),{href:`/despesas/${s.despesa.id}`},{default:d(()=>[o(a(b),{variant:"outline",size:"sm"},{default:d(()=>[o(a(Q),{class:"mr-2 h-4 w-4"}),n[6]||(n[6]=_(" Ver ",-1))]),_:1,__:[6]})]),_:1},8,["href"]),o(a(F),{href:`/despesas/${s.despesa.id}/edit`},{default:d(()=>[o(a(b),{variant:"outline",size:"sm"},{default:d(()=>[o(a(K),{class:"mr-2 h-4 w-4"}),n[7]||(n[7]=_(" Editar ",-1))]),_:1,__:[7]})]),_:1},8,["href"]),o(a(b),{variant:"outline",size:"sm",onClick:m,class:"text-error hover:bg-error hover:text-error-foreground"},{default:d(()=>[o(a(W),{class:"mr-2 h-4 w-4"}),n[8]||(n[8]=_(" Excluir ",-1))]),_:1,__:[8]})])]),_:1})]),_:1},8,["class"]))}}),Oe={class:"flex-1 min-w-0"},ze={class:"flex items-start justify-between"},Ee={class:"flex-1 min-w-0"},Ie={class:"flex items-center space-x-2"},Me={class:"font-medium text-foreground truncate"},qe={class:"text-sm text-muted-foreground"},Ae={class:"flex items-center space-x-2 ml-4"},Ge={class:"flex items-center space-x-4 mt-2 text-sm text-muted-foreground"},He={class:"flex items-center space-x-1"},Je={class:"font-semibold text-expense"},Ke={class:"flex items-center space-x-1"},Qe={key:0,class:"flex items-center space-x-1"},We={class:"flex items-center space-x-1 ml-4"},Xe=z({__name:"DespesaListItem",props:{despesa:{}},emits:["delete"],setup(B,{emit:C}){const j=B,h=C,L=r=>{switch(r){case"pago":return"bg-confirmed text-confirmed-foreground";case"pendente":return"bg-pending text-pending-foreground";case"vencido":return"bg-error text-error-foreground";default:return"bg-pending text-pending-foreground"}},x=r=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(r)),g=r=>new Date(r).toLocaleDateString("pt-BR"),y=r=>({pago:"Pago",pendente:"Pendente",vencido:"Vencido"})[r]||r,v=(r,m)=>{if(r==="pago")return!1;const s=new Date;return new Date(m)<s},f=()=>{h("delete",j.despesa.id)};return(r,m)=>(u(),p("div",{class:D(["flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-error bg-error/5":v(r.despesa.status,r.despesa.data_vencimento)}])},[e("div",Oe,[e("div",ze,[e("div",Ee,[e("div",Ie,[e("h3",Me,i(r.despesa.descricao),1),r.despesa.recorrente?(u(),V(a(H),{key:0,class:"h-4 w-4 text-muted-foreground"})):$("",!0)]),e("p",qe,i(r.despesa.categoria),1)]),e("div",Ae,[o(a(N),{class:D([L(r.despesa.status),"text-xs"])},{default:d(()=>[_(i(y(r.despesa.status)),1)]),_:1},8,["class"]),o(a(N),{variant:"outline",class:"text-xs"},{default:d(()=>[_(i(r.despesa.tipo==="fixa"?"Fixa":"Variável"),1)]),_:1})])]),e("div",Ge,[e("div",He,[o(a(J),{class:"h-3 w-3"}),e("span",Je,i(x(r.despesa.valor)),1)]),e("div",Ke,[o(a(O),{class:"h-3 w-3"}),e("span",{class:D({"text-error font-medium":v(r.despesa.status,r.despesa.data_vencimento)})}," Vence: "+i(g(r.despesa.data_vencimento)),3)]),r.despesa.data_pagamento?(u(),p("div",Qe,[o(a(O),{class:"h-3 w-3"}),e("span",null,"Pago: "+i(g(r.despesa.data_pagamento)),1)])):$("",!0)])]),e("div",We,[o(a(F),{href:`/despesas/${r.despesa.id}`},{default:d(()=>[o(a(b),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:d(()=>[o(a(Q),{class:"h-4 w-4"}),m[0]||(m[0]=e("span",{class:"sr-only"},"Ver despesa",-1))]),_:1,__:[0]})]),_:1},8,["href"]),o(a(F),{href:`/despesas/${r.despesa.id}/edit`},{default:d(()=>[o(a(b),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:d(()=>[o(a(K),{class:"h-4 w-4"}),m[1]||(m[1]=e("span",{class:"sr-only"},"Editar despesa",-1))]),_:1,__:[1]})]),_:1},8,["href"]),o(a(b),{variant:"ghost",size:"sm",onClick:f,class:"h-8 w-8 p-0 text-error hover:bg-error hover:text-error-foreground"},{default:d(()=>[o(a(W),{class:"h-4 w-4"}),m[2]||(m[2]=e("span",{class:"sr-only"},"Excluir despesa",-1))]),_:1,__:[2]})])],2))}}),Ye={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4"},Ze={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},es={class:"text-muted-foreground"},ss={class:"flex items-center space-x-2"},ts={key:0,class:"flex flex-col items-center justify-center py-12"},as={class:"text-center"},os={key:1,class:"flex flex-col items-center justify-center py-12"},rs={class:"text-center"},ns={key:2,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ls={key:3,class:"space-y-2"},Us=z({__name:"Index",props:{despesas:{}},setup(B){const C=B,j=[{title:"Dashboard",href:"/dashboard"},{title:"Despesas",href:"/despesas"}],{viewMode:h,setViewMode:L}=te("despesas-view-mode"),x=k(""),g=k("created_at"),y=k("desc"),v=k("all"),f=k("all"),r=k("all"),m=[{value:"pago",label:"Pago"},{value:"pendente",label:"Pendente"},{value:"vencido",label:"Vencido"}],s=[{value:"fixa",label:"Fixa"},{value:"variavel",label:"Variável"}],n=I(()=>[...new Set(C.despesas.map(t=>t.categoria))].map(t=>({value:t,label:t}))),S=[{value:"created_at",label:"Data de criação"},{value:"valor",label:"Valor"},{value:"descricao",label:"Descrição"},{value:"data_vencimento",label:"Vencimento"},{value:"categoria",label:"Categoria"}],w=I(()=>{let c=[...C.despesas];if(x.value){const t=x.value.toLowerCase();c=c.filter(l=>l.descricao.toLowerCase().includes(t)||l.categoria.toLowerCase().includes(t))}return v.value!=="all"&&(c=c.filter(t=>t.status===v.value)),f.value!=="all"&&(c=c.filter(t=>t.tipo===f.value)),r.value!=="all"&&(c=c.filter(t=>t.categoria===r.value)),c.sort((t,l)=>{let U=t[g.value],P=l[g.value];return g.value==="valor"&&(U=parseFloat(t.valor),P=parseFloat(l.valor)),U<P?y.value==="asc"?-1:1:U>P?y.value==="asc"?1:-1:0}),c}),T=()=>{x.value="",v.value="all",f.value="all",r.value="all"},E=c=>{confirm("Tem certeza que deseja excluir esta despesa?")&&se.delete(`/despesas/${c}`)};return(c,t)=>(u(),p(R,null,[o(a(Z),{title:"Despesas"}),o(X,{breadcrumbs:j},{default:d(()=>[e("div",Ye,[e("div",Ze,[e("div",null,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold tracking-tight"},"Despesas",-1)),e("p",es," Gerencie suas despesas e contas ("+i(w.value.length)+" "+i(w.value.length===1?"item":"itens")+") ",1)]),e("div",ss,[o(ae,{modelValue:a(h),"onUpdate:modelValue":[t[0]||(t[0]=l=>ee(h)?h.value=l:null),a(L)]},null,8,["modelValue","onUpdate:modelValue"]),o(a(F),{href:"/despesas/create"},{default:d(()=>[o(a(b),null,{default:d(()=>[o(a(A),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=_(" Nova Despesa ",-1))]),_:1,__:[8]})]),_:1})])]),o(oe,{"search-term":x.value,"onUpdate:searchTerm":t[1]||(t[1]=l=>x.value=l),"sort-by":g.value,"onUpdate:sortBy":t[2]||(t[2]=l=>g.value=l),"sort-order":y.value,"onUpdate:sortOrder":t[3]||(t[3]=l=>y.value=l),"status-filter":v.value,"onUpdate:statusFilter":t[4]||(t[4]=l=>v.value=l),"type-filter":f.value,"onUpdate:typeFilter":t[5]||(t[5]=l=>f.value=l),"category-filter":r.value,"onUpdate:categoryFilter":t[6]||(t[6]=l=>r.value=l),"status-options":m,"type-options":s,"category-options":n.value,"sort-options":S,"show-type-filter":!0,"show-category-filter":!0,onClearFilters:T},null,8,["search-term","sort-by","sort-order","status-filter","type-filter","category-filter","category-options"]),o(a(G)),c.despesas.length===0?(u(),p("div",ts,[e("div",as,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold"},"Nenhuma despesa encontrada",-1)),t[11]||(t[11]=e("p",{class:"text-muted-foreground mb-4"}," Comece adicionando sua primeira despesa ",-1)),o(a(F),{href:"/despesas/create"},{default:d(()=>[o(a(b),null,{default:d(()=>[o(a(A),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=_(" Adicionar Despesa ",-1))]),_:1,__:[9]})]),_:1})])])):w.value.length===0?(u(),p("div",os,[e("div",rs,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold"},"Nenhuma despesa encontrada",-1)),t[14]||(t[14]=e("p",{class:"text-muted-foreground mb-4"}," Tente ajustar os filtros de busca ",-1)),o(a(b),{variant:"outline",onClick:T},{default:d(()=>t[12]||(t[12]=[_(" Limpar Filtros ",-1)])),_:1,__:[12]})])])):a(h)==="cards"?(u(),p("div",ns,[(u(!0),p(R,null,M(w.value,l=>(u(),V(Ne,{key:l.id,despesa:l,onDelete:E},null,8,["despesa"]))),128))])):(u(),p("div",ls,[(u(!0),p(R,null,M(w.value,l=>(u(),V(Xe,{key:l.id,despesa:l,onDelete:E},null,8,["despesa"]))),128))]))])]),_:1})],64))}});export{Us as default};
