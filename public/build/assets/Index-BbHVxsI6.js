import{P as M,_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrA4F187.js";import{d as O,f as V,o as u,w as d,b as o,u as a,e,g as $,i as _,t as i,n as D,x as Z,a as p,l as F,r as C,c as E,h as ee,y as se,F as R,k as q,m as te}from"./app-BXkekOwa.js";import{_ as h}from"./index-CUK7joRU.js";import{_ as G}from"./Separator.vue_vue_type_script_setup_true_lang-CUGEsYJp.js";import{D as H,C as A,a as ae,u as oe,_ as re,b as ne}from"./useViewMode-BKslWcUl.js";import{_ as z}from"./index-RmrZzOCd.js";import{a as le,b as de,d as ie,c as ue,_ as ce}from"./CardTitle.vue_vue_type_script_setup_true_lang-D6IIpnr7.js";import{c as J}from"./createLucideIcon-DnV5VztL.js";import{C as N}from"./filter-B7crJ9Wz.js";import{U as pe,a as me,S as K}from"./user-CqCAkBWs.js";import{E as Q}from"./eye-DIuTzd1X.js";import{T as W}from"./trash-2-BmVgKJQX.js";import"./useForwardExpose-D7YJq9kG.js";import"./VisuallyHidden-Dz4NaBho.js";import"./check-lV5bP6Gs.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Z7dItZLR.js";import"./Input.vue_vue_type_script_setup_true_lang-D2Wa0HAI.js";import"./Label.vue_vue_type_script_setup_true_lang-CIpzQwdv.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CcD1Gf1x.js";import"./useFormControl-CuChciJs.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=J("RepeatIcon",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=J("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ve={class:"flex items-start justify-between"},ge={class:"space-y-1 flex-1 min-w-0"},_e={class:"flex items-center space-x-2"},xe={class:"flex items-center space-x-2 ml-4"},he={class:"mb-4"},be={class:"flex items-center space-x-2"},ye={class:"text-2xl font-bold text-expense"},we={class:"grid grid-cols-1 gap-3 mb-4"},$e={class:"flex items-center space-x-2"},De={key:0,class:"text-xs bg-warning text-warning-foreground px-2 py-0.5 rounded-full"},ke={key:0,class:"flex items-center justify-between p-2 bg-confirmed/10 rounded-md"},Ce={class:"flex items-center space-x-2"},Ve={class:"text-sm"},Fe={class:"grid grid-cols-1 gap-2 mb-4"},Be={key:0,class:"flex items-center justify-between p-2 bg-muted/20 rounded-md"},je={class:"flex items-center space-x-2"},Le={class:"text-sm"},Se={key:1,class:"flex items-center justify-between p-2 bg-muted/20 rounded-md"},Te={class:"flex items-center space-x-2"},Ue={class:"text-sm"},Pe={key:0,class:"mb-4"},Re={class:"text-sm bg-muted/30 p-2 rounded-md"},ze={class:"flex justify-end space-x-2"},Ne=O({__name:"DespesaCard",props:{despesa:{}},emits:["delete"],setup(B,{emit:k}){const j=B,b=k,L=s=>{switch(s){case"pago":return"bg-confirmed text-confirmed-foreground";case"pendente":return"bg-pending text-pending-foreground";case"vencido":return"bg-error text-error-foreground";default:return"bg-pending text-pending-foreground"}},x=s=>{switch(s){case"pago":return A;case"vencido":return fe;default:return ae}},g=s=>({pago:"Pago",pendente:"Pendente",vencido:"Vencido"})[s]||s,y=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(s)),v=s=>new Date(s).toLocaleDateString("pt-BR"),f=(s,n)=>{if(s==="pago")return!1;const S=new Date;return new Date(n)<S},r=s=>{const n=new Date,w=new Date(s).getTime()-n.getTime();return Math.ceil(w/(1e3*60*60*24))},m=()=>{b("delete",j.despesa.id)};return(s,n)=>(u(),V(a(ce),{class:D(["hover:shadow-md transition-shadow",{"border-error bg-error/5":f(s.despesa.status,s.despesa.data_vencimento)}])},{default:d(()=>[o(a(le),{class:"pb-3"},{default:d(()=>[e("div",ve,[e("div",ge,[e("div",_e,[o(a(de),{class:"text-lg truncate"},{default:d(()=>[_(i(s.despesa.descricao),1)]),_:1}),s.despesa.recorrente?(u(),V(a(X),{key:0,class:"h-4 w-4 text-muted-foreground"})):$("",!0)]),o(a(ie),{class:"flex items-center space-x-2"},{default:d(()=>[e("span",null,i(s.despesa.categoria),1),n[0]||(n[0]=e("span",{class:"text-xs"},"•",-1)),e("span",null,i(s.despesa.tipo==="fixa"?"Fixa":"Variável"),1)]),_:1,__:[0]})]),e("div",xe,[o(a(z),{class:D(L(s.despesa.status))},{default:d(()=>[(u(),V(Z(x(s.despesa.status)),{class:"mr-1 h-3 w-3"})),_(" "+i(g(s.despesa.status)),1)]),_:1},8,["class"])])])]),_:1}),o(a(ue),null,{default:d(()=>[e("div",he,[e("div",be,[o(a(H),{class:"h-5 w-5 text-expense"}),e("span",ye,i(y(s.despesa.valor)),1)])]),e("div",we,[e("div",{class:D(["flex items-center justify-between p-2 rounded-md",f(s.despesa.status,s.despesa.data_vencimento)?"bg-error/10":"bg-muted/30"])},[e("div",$e,[o(a(N),{class:D(["h-4 w-4",f(s.despesa.status,s.despesa.data_vencimento)?"text-error":"text-muted-foreground"])},null,8,["class"]),n[1]||(n[1]=e("span",{class:"text-sm font-medium"},"Vencimento",-1)),s.despesa.status!=="pago"&&r(s.despesa.data_vencimento)<=7&&r(s.despesa.data_vencimento)>=0?(u(),p("span",De,i(r(s.despesa.data_vencimento))+" dias ",1)):$("",!0)]),e("span",{class:D(["text-sm",f(s.despesa.status,s.despesa.data_vencimento)?"text-error font-medium":""])},i(v(s.despesa.data_vencimento)),3)],2),s.despesa.data_pagamento?(u(),p("div",ke,[e("div",Ce,[o(a(A),{class:"h-4 w-4 text-confirmed"}),n[2]||(n[2]=e("span",{class:"text-sm font-medium"},"Pagamento",-1))]),e("span",Ve,i(v(s.despesa.data_pagamento)),1)])):$("",!0)]),e("div",Fe,[s.despesa.creator?(u(),p("div",Be,[e("div",je,[o(a(pe),{class:"h-4 w-4 text-muted-foreground"}),n[3]||(n[3]=e("span",{class:"text-sm font-medium"},"Criado por",-1))]),e("span",Le,i(s.despesa.creator.name),1)])):$("",!0),s.despesa.responsible_user?(u(),p("div",Se,[e("div",Te,[o(a(me),{class:"h-4 w-4 text-muted-foreground"}),n[4]||(n[4]=e("span",{class:"text-sm font-medium"},"Responsável",-1))]),e("span",Ue,i(s.despesa.responsible_user.name),1)])):$("",!0)]),s.despesa.observacoes?(u(),p("div",Pe,[n[5]||(n[5]=e("p",{class:"text-sm font-medium text-muted-foreground mb-1"},"Observações",-1)),e("p",Re,i(s.despesa.observacoes),1)])):$("",!0),o(a(G),{class:"my-4"}),e("div",ze,[o(a(F),{href:`/despesas/${s.despesa.id}`},{default:d(()=>[o(a(h),{variant:"outline",size:"sm"},{default:d(()=>[o(a(Q),{class:"mr-2 h-4 w-4"}),n[6]||(n[6]=_(" Ver ",-1))]),_:1,__:[6]})]),_:1},8,["href"]),o(a(F),{href:`/despesas/${s.despesa.id}/edit`},{default:d(()=>[o(a(h),{variant:"outline",size:"sm"},{default:d(()=>[o(a(K),{class:"mr-2 h-4 w-4"}),n[7]||(n[7]=_(" Editar ",-1))]),_:1,__:[7]})]),_:1},8,["href"]),o(a(h),{variant:"outline",size:"sm",onClick:m,class:"text-error hover:bg-error hover:text-error-foreground"},{default:d(()=>[o(a(W),{class:"mr-2 h-4 w-4"}),n[8]||(n[8]=_(" Excluir ",-1))]),_:1,__:[8]})])]),_:1})]),_:1},8,["class"]))}}),Oe={class:"flex-1 min-w-0"},Ie={class:"flex items-start justify-between"},Me={class:"flex-1 min-w-0"},Ee={class:"flex items-center space-x-2"},qe={class:"font-medium text-foreground truncate"},Ae={class:"text-sm text-muted-foreground"},Ge={class:"flex items-center space-x-2 ml-4"},He={class:"flex items-center space-x-4 mt-2 text-sm text-muted-foreground"},Je={class:"flex items-center space-x-1"},Ke={class:"font-semibold text-expense"},Qe={class:"flex items-center space-x-1"},We={key:0,class:"flex items-center space-x-1"},Xe={class:"flex items-center space-x-1 ml-4"},Ye=O({__name:"DespesaListItem",props:{despesa:{}},emits:["delete"],setup(B,{emit:k}){const j=B,b=k,L=r=>{switch(r){case"pago":return"bg-confirmed text-confirmed-foreground";case"pendente":return"bg-pending text-pending-foreground";case"vencido":return"bg-error text-error-foreground";default:return"bg-pending text-pending-foreground"}},x=r=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(r)),g=r=>new Date(r).toLocaleDateString("pt-BR"),y=r=>({pago:"Pago",pendente:"Pendente",vencido:"Vencido"})[r]||r,v=(r,m)=>{if(r==="pago")return!1;const s=new Date;return new Date(m)<s},f=()=>{b("delete",j.despesa.id)};return(r,m)=>(u(),p("div",{class:D(["flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-error bg-error/5":v(r.despesa.status,r.despesa.data_vencimento)}])},[e("div",Oe,[e("div",Ie,[e("div",Me,[e("div",Ee,[e("h3",qe,i(r.despesa.descricao),1),r.despesa.recorrente?(u(),V(a(X),{key:0,class:"h-4 w-4 text-muted-foreground"})):$("",!0)]),e("p",Ae,i(r.despesa.categoria),1)]),e("div",Ge,[o(a(z),{class:D([L(r.despesa.status),"text-xs"])},{default:d(()=>[_(i(y(r.despesa.status)),1)]),_:1},8,["class"]),o(a(z),{variant:"outline",class:"text-xs"},{default:d(()=>[_(i(r.despesa.tipo==="fixa"?"Fixa":"Variável"),1)]),_:1})])]),e("div",He,[e("div",Je,[o(a(H),{class:"h-3 w-3"}),e("span",Ke,i(x(r.despesa.valor)),1)]),e("div",Qe,[o(a(N),{class:"h-3 w-3"}),e("span",{class:D({"text-error font-medium":v(r.despesa.status,r.despesa.data_vencimento)})}," Vence: "+i(g(r.despesa.data_vencimento)),3)]),r.despesa.data_pagamento?(u(),p("div",We,[o(a(N),{class:"h-3 w-3"}),e("span",null,"Pago: "+i(g(r.despesa.data_pagamento)),1)])):$("",!0)])]),e("div",Xe,[o(a(F),{href:`/despesas/${r.despesa.id}`},{default:d(()=>[o(a(h),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:d(()=>[o(a(Q),{class:"h-4 w-4"}),m[0]||(m[0]=e("span",{class:"sr-only"},"Ver despesa",-1))]),_:1,__:[0]})]),_:1},8,["href"]),o(a(F),{href:`/despesas/${r.despesa.id}/edit`},{default:d(()=>[o(a(h),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0"},{default:d(()=>[o(a(K),{class:"h-4 w-4"}),m[1]||(m[1]=e("span",{class:"sr-only"},"Editar despesa",-1))]),_:1,__:[1]})]),_:1},8,["href"]),o(a(h),{variant:"ghost",size:"sm",onClick:f,class:"h-8 w-8 p-0 text-error hover:bg-error hover:text-error-foreground"},{default:d(()=>[o(a(W),{class:"h-4 w-4"}),m[2]||(m[2]=e("span",{class:"sr-only"},"Excluir despesa",-1))]),_:1,__:[2]})])],2))}}),Ze={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4"},es={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},ss={class:"text-muted-foreground"},ts={class:"flex items-center space-x-2"},as={key:0,class:"flex flex-col items-center justify-center py-12"},os={class:"text-center"},rs={key:1,class:"flex flex-col items-center justify-center py-12"},ns={class:"text-center"},ls={key:2,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ds={key:3,class:"space-y-2"},js=O({__name:"Index",props:{despesas:{}},setup(B){const k=B,j=[{title:"Dashboard",href:"/dashboard"},{title:"Despesas",href:"/despesas"}],{viewMode:b,setViewMode:L}=oe("despesas-view-mode"),x=C(""),g=C("created_at"),y=C("desc"),v=C("all"),f=C("all"),r=C("all"),m=[{value:"pago",label:"Pago"},{value:"pendente",label:"Pendente"},{value:"vencido",label:"Vencido"}],s=[{value:"fixa",label:"Fixa"},{value:"variavel",label:"Variável"}],n=E(()=>[...new Set(k.despesas.map(t=>t.categoria))].map(t=>({value:t,label:t}))),S=[{value:"created_at",label:"Data de criação"},{value:"valor",label:"Valor"},{value:"descricao",label:"Descrição"},{value:"data_vencimento",label:"Vencimento"},{value:"categoria",label:"Categoria"}],w=E(()=>{let c=[...k.despesas];if(x.value){const t=x.value.toLowerCase();c=c.filter(l=>l.descricao.toLowerCase().includes(t)||l.categoria.toLowerCase().includes(t))}return v.value!=="all"&&(c=c.filter(t=>t.status===v.value)),f.value!=="all"&&(c=c.filter(t=>t.tipo===f.value)),r.value!=="all"&&(c=c.filter(t=>t.categoria===r.value)),c.sort((t,l)=>{let U=t[g.value],P=l[g.value];return g.value==="valor"&&(U=parseFloat(t.valor),P=parseFloat(l.valor)),U<P?y.value==="asc"?-1:1:U>P?y.value==="asc"?1:-1:0}),c}),T=()=>{x.value="",v.value="all",f.value="all",r.value="all"},I=c=>{confirm("Tem certeza que deseja excluir esta despesa?")&&te.delete(`/despesas/${c}`)};return(c,t)=>(u(),p(R,null,[o(a(ee),{title:"Despesas"}),o(Y,{breadcrumbs:j},{default:d(()=>[e("div",Ze,[e("div",es,[e("div",null,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold tracking-tight"},"Despesas",-1)),e("p",ss," Gerencie suas despesas e contas ("+i(w.value.length)+" "+i(w.value.length===1?"item":"itens")+") ",1)]),e("div",ts,[o(re,{modelValue:a(b),"onUpdate:modelValue":[t[0]||(t[0]=l=>se(b)?b.value=l:null),a(L)]},null,8,["modelValue","onUpdate:modelValue"]),o(a(F),{href:"/despesas/create"},{default:d(()=>[o(a(h),null,{default:d(()=>[o(a(M),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=_(" Nova Despesa ",-1))]),_:1,__:[8]})]),_:1})])]),o(ne,{"search-term":x.value,"onUpdate:searchTerm":t[1]||(t[1]=l=>x.value=l),"sort-by":g.value,"onUpdate:sortBy":t[2]||(t[2]=l=>g.value=l),"sort-order":y.value,"onUpdate:sortOrder":t[3]||(t[3]=l=>y.value=l),"status-filter":v.value,"onUpdate:statusFilter":t[4]||(t[4]=l=>v.value=l),"type-filter":f.value,"onUpdate:typeFilter":t[5]||(t[5]=l=>f.value=l),"category-filter":r.value,"onUpdate:categoryFilter":t[6]||(t[6]=l=>r.value=l),"status-options":m,"type-options":s,"category-options":n.value,"sort-options":S,"show-type-filter":!0,"show-category-filter":!0,onClearFilters:T},null,8,["search-term","sort-by","sort-order","status-filter","type-filter","category-filter","category-options"]),o(a(G)),c.despesas.length===0?(u(),p("div",as,[e("div",os,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold"},"Nenhuma despesa encontrada",-1)),t[11]||(t[11]=e("p",{class:"text-muted-foreground mb-4"}," Comece adicionando sua primeira despesa ",-1)),o(a(F),{href:"/despesas/create"},{default:d(()=>[o(a(h),null,{default:d(()=>[o(a(M),{class:"mr-2 h-4 w-4"}),t[9]||(t[9]=_(" Adicionar Despesa ",-1))]),_:1,__:[9]})]),_:1})])])):w.value.length===0?(u(),p("div",rs,[e("div",ns,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold"},"Nenhuma despesa encontrada",-1)),t[14]||(t[14]=e("p",{class:"text-muted-foreground mb-4"}," Tente ajustar os filtros de busca ",-1)),o(a(h),{variant:"outline",onClick:T},{default:d(()=>t[12]||(t[12]=[_(" Limpar Filtros ",-1)])),_:1,__:[12]})])])):a(b)==="cards"?(u(),p("div",ls,[(u(!0),p(R,null,q(w.value,l=>(u(),V(Ne,{key:l.id,despesa:l,onDelete:I},null,8,["despesa"]))),128))])):(u(),p("div",ds,[(u(!0),p(R,null,q(w.value,l=>(u(),V(Ye,{key:l.id,despesa:l,onDelete:I},null,8,["despesa"]))),128))]))])]),_:1})],64))}});export{js as default};
