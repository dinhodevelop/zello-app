import{d as N,r as g,f as R,o as u,w as i,e,b as a,t as r,u as s,l as y,i as n,a as f,F as k,k as b,g as D,m as h}from"./app-DA2OwBuc.js";import{t as w,_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-mFK_bMo8.js";import{_}from"./index-BMPFyPQQ.js";import{_ as $}from"./index-BGeUKtuW.js";import{_ as z,a as B,b as E,c as L}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CqmqabXO.js";import{_ as V}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CRCcRCi1.js";import{U as C,b as G}from"./x-C6v3_JDq.js";import{S as U,U as I}from"./user-minus-ByCqgzDU.js";import{T as P}from"./trash-2-94HVum9T.js";import"./index-BV0i58t1.js";import"./useForwardExpose-DBK4_ufP.js";import"./VisuallyHidden-DEgB8TXE.js";import"./RovingFocusGroup-CKPTfuzX.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./check-CP81MTY8.js";import"./createLucideIcon-DSygwVmt.js";const q={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},J={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},K={class:"p-6"},O={class:"flex items-center justify-between mb-6"},Q={class:"text-lg font-medium text-gray-900 dark:text-white"},W={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},X={class:"p-6"},Y={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},Z={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ee={class:"flex items-start justify-between mb-3"},te={class:"flex items-center gap-3"},se={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},ae={class:"text-blue-600 dark:text-blue-400 font-medium"},oe={class:"font-medium text-gray-900 dark:text-white"},le={key:0,class:"text-xs text-blue-600 dark:text-blue-400 ml-1"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},re={class:"flex items-center gap-2 mt-1"},de={class:"flex flex-col gap-2"},ne={class:"flex gap-2"},ue={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},ce={class:"p-6"},me={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},fe={key:0,class:"text-center py-8"},_e={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ve={class:"flex items-start justify-between mb-3"},he={class:"flex items-center gap-3"},ge={class:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"},pe={class:"text-gray-600 dark:text-gray-400 font-medium"},xe={class:"font-medium text-gray-900 dark:text-white"},ye={class:"text-sm text-gray-500 dark:text-gray-400"},ke={key:0,class:"text-xs text-orange-600 dark:text-orange-400"},be={key:1,class:"text-xs text-green-600 dark:text-green-400"},we={class:"flex items-center gap-2 mt-1"},$e={class:"flex flex-col gap-2"},Ce={class:"flex gap-2"},Ue={class:"text-sm text-gray-600 dark:text-gray-400"},Pe=N({__name:"Index",props:{household:{},members:{},availableUsers:{}},setup(A){const p=A,d=g(!1),c=g(!1),m=g({title:"",message:"",confirmText:"",type:"default",action:()=>{}}),T=o=>{m.value={title:"Adicionar Membro",message:`Deseja adicionar ${o.name} ao lar "${p.household.name}"?`,confirmText:"Adicionar",type:"default",action:()=>{h.post(`/user-management/${o.id}/add-to-household`,{},{onStart:()=>c.value=!0,onFinish:()=>{c.value=!1,d.value=!1}})}},d.value=!0},j=o=>{m.value={title:"Remover Membro",message:`Deseja remover ${o.name} do lar "${p.household.name}"?`,confirmText:"Remover",type:"default",action:()=>{h.post(`/user-management/${o.id}/remove-from-household`,{},{onStart:()=>c.value=!0,onFinish:()=>{c.value=!1,d.value=!1}})}},d.value=!0},S=o=>{m.value={title:"Excluir Usuário",message:`Deseja excluir permanentemente o usuário ${o.name}? Esta ação não pode ser desfeita.`,confirmText:"Excluir",type:"delete",action:()=>{h.delete(`/user-management/${o.id}`,{onStart:()=>c.value=!0,onFinish:()=>{c.value=!1,d.value=!1}})}},d.value=!0},x=o=>{const l=o.role==="admin"?"user":"admin",t={admin:"Administrador",user:"Usuário"};m.value={title:"Alterar Role",message:`Deseja alterar a role de ${o.name} para ${t[l]}?`,confirmText:"Alterar",type:"default",action:()=>{h.patch(`/user-management/${o.id}/role`,{role:l},{onStart:()=>c.value=!0,onFinish:()=>{c.value=!1,d.value=!1}})}},d.value=!0},M=()=>{m.value.action()};return(o,l)=>(u(),R(F,{title:"Gerenciar Usuários"},{header:i(()=>l[2]||(l[2]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gerenciar Usuários ",-1)])),default:i(()=>[e("div",q,[e("div",H,[e("div",J,[e("div",K,[e("div",O,[e("div",null,[e("h3",Q," Lar: "+r(o.household.name),1),l[3]||(l[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Gerencie os membros do seu lar e crie novos usuários ",-1))]),a(s(_),{"as-child":""},{default:i(()=>[a(s(y),{href:s(w)().url},{default:i(()=>[a(s(C),{class:"w-4 h-4 mr-2"}),l[4]||(l[4]=n(" Criar Usuário ",-1))]),_:1,__:[4]},8,["href"])]),_:1})])])]),e("div",W,[e("div",X,[e("h4",Y," Membros do Lar ("+r(o.members.length)+") ",1),e("div",Z,[(u(!0),f(k,null,b(o.members,t=>(u(),f("div",{key:t.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",ee,[e("div",te,[e("div",se,[e("span",ae,r(t.name.charAt(0).toUpperCase()),1)]),e("div",null,[e("h5",oe,[n(r(t.name)+" ",1),t.id===o.household.created_by?(u(),f("span",le," (Criador) ")):D("",!0)]),e("p",ie,r(t.email),1),e("div",re,[a(s($),{variant:t.role==="admin"?"default":"secondary",class:"text-xs"},{default:i(()=>[n(r(t.role==="admin"?"Admin":"Usuário"),1)]),_:2},1032,["variant"])])])])]),e("div",de,[e("div",ne,[a(s(_),{variant:"outline",size:"sm",onClick:v=>x(t),disabled:t.id===o.$page.props.auth.user.id,class:"flex-1"},{default:i(()=>[a(s(U),{class:"w-4 h-4 mr-1"}),n(" "+r(t.role==="admin"?"Remover Admin":"Tornar Admin"),1)]),_:2},1032,["onClick","disabled"])]),a(s(_),{variant:"outline",size:"sm",onClick:v=>j(t),disabled:t.id===o.household.created_by||t.id===o.$page.props.auth.user.id,class:"w-full"},{default:i(()=>[a(s(I),{class:"w-4 h-4 mr-1"}),l[5]||(l[5]=n(" Remover ",-1))]),_:2,__:[5]},1032,["onClick","disabled"])])]))),128))])])]),e("div",ue,[e("div",ce,[e("h4",me," Usuários Disponíveis ("+r(o.availableUsers.length)+") ",1),o.availableUsers.length===0?(u(),f("div",fe,[a(s(G),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l[7]||(l[7]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Não há usuários disponíveis para adicionar. ",-1)),a(s(_),{"as-child":"",class:"mt-4"},{default:i(()=>[a(s(y),{href:s(w)().url},{default:i(()=>l[6]||(l[6]=[n(" Criar Novo Usuário ",-1)])),_:1,__:[6]},8,["href"])]),_:1})])):(u(),f("div",_e,[(u(!0),f(k,null,b(o.availableUsers,t=>(u(),f("div",{key:t.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",ve,[e("div",he,[e("div",ge,[e("span",pe,r(t.name.charAt(0).toUpperCase()),1)]),e("div",null,[e("h5",xe,r(t.name),1),e("p",ye,r(t.email),1),t.household?(u(),f("p",ke," Lar: "+r(t.household?.name),1)):(u(),f("p",be," Sem lar ")),e("div",we,[a(s($),{variant:t.role==="admin"?"default":"secondary",class:"text-xs"},{default:i(()=>[n(r(t.role==="admin"?"Admin":"Usuário"),1)]),_:2},1032,["variant"])])])])]),e("div",$e,[e("div",Ce,[a(s(_),{size:"sm",onClick:v=>T(t),class:"flex-1"},{default:i(()=>[a(s(C),{class:"w-4 h-4 mr-1"}),l[8]||(l[8]=n(" Adicionar ",-1))]),_:2,__:[8]},1032,["onClick"]),a(s(_),{variant:"outline",size:"sm",onClick:v=>x(t)},{default:i(()=>[a(s(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),a(s(_),{variant:"destructive",size:"sm",onClick:v=>S(t)},{default:i(()=>[a(s(P),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])])]))),128))]))])])])]),a(s(z),{open:d.value,"onUpdate:open":l[1]||(l[1]=t=>d.value=t)},{default:i(()=>[a(s(B),null,{default:i(()=>[a(s(E),null,{default:i(()=>[a(s(L),null,{default:i(()=>[n(r(m.value.title),1)]),_:1})]),_:1}),e("p",Ue,r(m.value.message),1),a(s(V),null,{default:i(()=>[a(s(_),{variant:"outline",onClick:l[0]||(l[0]=t=>d.value=!1)},{default:i(()=>l[9]||(l[9]=[n(" Cancelar ",-1)])),_:1,__:[9]}),a(s(_),{variant:m.value.type==="delete"?"destructive":"default",onClick:M,disabled:c.value},{default:i(()=>[n(r(m.value.confirmText),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Pe as default};
