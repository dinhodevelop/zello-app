import{d as R,r as g,f as z,o as c,w as i,e,b as a,t as r,u as s,l as y,i as n,a as f,F as k,k as b,g as D,m as v}from"./app-BXkekOwa.js";import{x as w,U as $,y as F,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrA4F187.js";import{_}from"./index-CUK7joRU.js";import{_ as C}from"./index-RmrZzOCd.js";import{_ as V,a as B,b as E,c as I}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BdK3WuRE.js";import{_ as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DxdmOuSG.js";import{c as A}from"./createLucideIcon-DnV5VztL.js";import{T as q}from"./trash-2-BmVgKJQX.js";import"./useForwardExpose-D7YJq9kG.js";import"./VisuallyHidden-Dz4NaBho.js";import"./check-lV5bP6Gs.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Z7dItZLR.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=A("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=A("UserMinusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),P={class:"py-12"},J={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},K={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},O={class:"p-6"},Q={class:"flex items-center justify-between mb-6"},W={class:"text-lg font-medium text-gray-900 dark:text-white"},X={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Y={class:"p-6"},Z={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},ee={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},te={class:"flex items-start justify-between mb-3"},se={class:"flex items-center gap-3"},ae={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},oe={class:"text-blue-600 dark:text-blue-400 font-medium"},le={class:"font-medium text-gray-900 dark:text-white"},ie={key:0,class:"text-xs text-blue-600 dark:text-blue-400 ml-1"},re={class:"text-sm text-gray-500 dark:text-gray-400"},de={class:"flex items-center gap-2 mt-1"},ne={class:"flex flex-col gap-2"},ce={class:"flex gap-2"},ue={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},me={class:"p-6"},fe={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},_e={key:0,class:"text-center py-8"},he={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ve={class:"flex items-start justify-between mb-3"},ge={class:"flex items-center gap-3"},xe={class:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"},pe={class:"text-gray-600 dark:text-gray-400 font-medium"},ye={class:"font-medium text-gray-900 dark:text-white"},ke={class:"text-sm text-gray-500 dark:text-gray-400"},be={key:0,class:"text-xs text-orange-600 dark:text-orange-400"},we={key:1,class:"text-xs text-green-600 dark:text-green-400"},$e={class:"flex items-center gap-2 mt-1"},Ce={class:"flex flex-col gap-2"},Ue={class:"flex gap-2"},Ae={class:"text-sm text-gray-600 dark:text-gray-400"},Ie=R({__name:"Index",props:{household:{},members:{},availableUsers:{}},setup(j){const x=j,d=g(!1),u=g(!1),m=g({title:"",message:"",confirmText:"",type:"default",action:()=>{}}),M=o=>{m.value={title:"Adicionar Membro",message:`Deseja adicionar ${o.name} ao lar "${x.household.name}"?`,confirmText:"Adicionar",type:"default",action:()=>{v.post(`/user-management/${o.id}/add-to-household`,{},{onStart:()=>u.value=!0,onFinish:()=>{u.value=!1,d.value=!1}})}},d.value=!0},T=o=>{m.value={title:"Remover Membro",message:`Deseja remover ${o.name} do lar "${x.household.name}"?`,confirmText:"Remover",type:"default",action:()=>{v.post(`/user-management/${o.id}/remove-from-household`,{},{onStart:()=>u.value=!0,onFinish:()=>{u.value=!1,d.value=!1}})}},d.value=!0},S=o=>{m.value={title:"Excluir Usuário",message:`Deseja excluir permanentemente o usuário ${o.name}? Esta ação não pode ser desfeita.`,confirmText:"Excluir",type:"delete",action:()=>{v.delete(`/user-management/${o.id}`,{onStart:()=>u.value=!0,onFinish:()=>{u.value=!1,d.value=!1}})}},d.value=!0},p=o=>{const l=o.role==="admin"?"user":"admin",t={admin:"Administrador",user:"Usuário"};m.value={title:"Alterar Role",message:`Deseja alterar a role de ${o.name} para ${t[l]}?`,confirmText:"Alterar",type:"default",action:()=>{v.patch(`/user-management/${o.id}/role`,{role:l},{onStart:()=>u.value=!0,onFinish:()=>{u.value=!1,d.value=!1}})}},d.value=!0},N=()=>{m.value.action()};return(o,l)=>(c(),z(L,{title:"Gerenciar Usuários"},{header:i(()=>l[2]||(l[2]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gerenciar Usuários ",-1)])),default:i(()=>[e("div",P,[e("div",J,[e("div",K,[e("div",O,[e("div",Q,[e("div",null,[e("h3",W," Lar: "+r(o.household.name),1),l[3]||(l[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Gerencie os membros do seu lar e crie novos usuários ",-1))]),a(s(_),{"as-child":""},{default:i(()=>[a(s(y),{href:s(w)().url},{default:i(()=>[a(s($),{class:"w-4 h-4 mr-2"}),l[4]||(l[4]=n(" Criar Usuário ",-1))]),_:1,__:[4]},8,["href"])]),_:1})])])]),e("div",X,[e("div",Y,[e("h4",Z," Membros do Lar ("+r(o.members.length)+") ",1),e("div",ee,[(c(!0),f(k,null,b(o.members,t=>(c(),f("div",{key:t.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",te,[e("div",se,[e("div",ae,[e("span",oe,r(t.name.charAt(0).toUpperCase()),1)]),e("div",null,[e("h5",le,[n(r(t.name)+" ",1),t.id===o.household.created_by?(c(),f("span",ie," (Criador) ")):D("",!0)]),e("p",re,r(t.email),1),e("div",de,[a(s(C),{variant:t.role==="admin"?"default":"secondary",class:"text-xs"},{default:i(()=>[n(r(t.role==="admin"?"Admin":"Usuário"),1)]),_:2},1032,["variant"])])])])]),e("div",ne,[e("div",ce,[a(s(_),{variant:"outline",size:"sm",onClick:h=>p(t),disabled:t.id===o.$page.props.auth.user.id,class:"flex-1"},{default:i(()=>[a(s(U),{class:"w-4 h-4 mr-1"}),n(" "+r(t.role==="admin"?"Remover Admin":"Tornar Admin"),1)]),_:2},1032,["onClick","disabled"])]),a(s(_),{variant:"outline",size:"sm",onClick:h=>T(t),disabled:t.id===o.household.created_by||t.id===o.$page.props.auth.user.id,class:"w-full"},{default:i(()=>[a(s(H),{class:"w-4 h-4 mr-1"}),l[5]||(l[5]=n(" Remover ",-1))]),_:2,__:[5]},1032,["onClick","disabled"])])]))),128))])])]),e("div",ue,[e("div",me,[e("h4",fe," Usuários Disponíveis ("+r(o.availableUsers.length)+") ",1),o.availableUsers.length===0?(c(),f("div",_e,[a(s(F),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l[7]||(l[7]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Não há usuários disponíveis para adicionar. ",-1)),a(s(_),{"as-child":"",class:"mt-4"},{default:i(()=>[a(s(y),{href:s(w)().url},{default:i(()=>l[6]||(l[6]=[n(" Criar Novo Usuário ",-1)])),_:1,__:[6]},8,["href"])]),_:1})])):(c(),f("div",he,[(c(!0),f(k,null,b(o.availableUsers,t=>(c(),f("div",{key:t.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[e("div",ve,[e("div",ge,[e("div",xe,[e("span",pe,r(t.name.charAt(0).toUpperCase()),1)]),e("div",null,[e("h5",ye,r(t.name),1),e("p",ke,r(t.email),1),t.household?(c(),f("p",be," Lar: "+r(t.household?.name),1)):(c(),f("p",we," Sem lar ")),e("div",$e,[a(s(C),{variant:t.role==="admin"?"default":"secondary",class:"text-xs"},{default:i(()=>[n(r(t.role==="admin"?"Admin":"Usuário"),1)]),_:2},1032,["variant"])])])])]),e("div",Ce,[e("div",Ue,[a(s(_),{size:"sm",onClick:h=>M(t),class:"flex-1"},{default:i(()=>[a(s($),{class:"w-4 h-4 mr-1"}),l[8]||(l[8]=n(" Adicionar ",-1))]),_:2,__:[8]},1032,["onClick"]),a(s(_),{variant:"outline",size:"sm",onClick:h=>p(t)},{default:i(()=>[a(s(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),a(s(_),{variant:"destructive",size:"sm",onClick:h=>S(t)},{default:i(()=>[a(s(q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])])]))),128))]))])])])]),a(s(V),{open:d.value,"onUpdate:open":l[1]||(l[1]=t=>d.value=t)},{default:i(()=>[a(s(B),null,{default:i(()=>[a(s(E),null,{default:i(()=>[a(s(I),null,{default:i(()=>[n(r(m.value.title),1)]),_:1})]),_:1}),e("p",Ae,r(m.value.message),1),a(s(G),null,{default:i(()=>[a(s(_),{variant:"outline",onClick:l[0]||(l[0]=t=>d.value=!1)},{default:i(()=>l[9]||(l[9]=[n(" Cancelar ",-1)])),_:1,__:[9]}),a(s(_),{variant:m.value.type==="delete"?"destructive":"default",onClick:N,disabled:u.value},{default:i(()=>[n(r(m.value.confirmText),1)]),_:1},8,["variant","disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ie as default};
